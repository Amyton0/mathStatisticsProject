<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <title>StatVizorium</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header_wrap">
        <header class="header">
            <a href="#">
                <img src="шапка 1.svg" alt="">
            </a>
        </header>
    </div>
    <div class="authorisation_block">
        <div class="purple_header">
            Авторизация
        </div>
        <div class="form_block">
            <form id="authorisation_form">
                <label for="login">Логин</label>
                <input type="text" id="login" name="login" required >
                <label for="password">Пароль</label>
                <input type="password" id="password" name="password" required >
                <button class="form_auth_button" type="submit" name="form_auth_submit">Войти</button>
            </form>

            <script>
                document.getElementById("authorisation_form").addEventListener("submit", function (event) {
                    event.preventDefault();

                    let username = document.getElementById("login").value;
                    let password = document.getElementById("password").value;
                    let userId = 0;

                    fetch('users.json').then(response => response.json()).then(data => {
                    let user = data.find(user => user.login === username && user.password === password);


                    if(user) {

                        for (let i = 0; i < data.length; i++) {
                        if (data[i].login === username) {
                            userId = data[i].id;
                            }
                        }
                        localStorage.setItem("userId", userId);
                        localStorage.setItem("login", username);

                        window.location.href = '/Send_page.html';
                    } else {
                        alert("Invalid username or password. Please try again.");
                    }
                })
                .catch(error => console.error('Error:', error));
                });
            </script>
        </div>
    </div>

    <div class="footer_wrap">
        <footer class="footer">
            <a href="#">
                <img src="фиит 4.svg">
            </a>
        </footer>
    </div>

      <script src="solutions.js"></script>
</body>
</html>
